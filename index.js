!function(){"use strict";class t{constructor(t="#fff",s=["#fff","#000"]){this.color=new e(t),this.combinations=[],this.highest=0,s.forEach((function(t){const s=new e(t),n=this.setContrastRatio(s),o=this.setRating(o);this.combinations.push({color:s,contrast:n,accessibility:o})}),this)}setContrastRatio(t){const e=this.getLuminance(this.color),s=this.getLuminance(t);return e>s?(e+.05)/(s+.05):(s+.05)/(e+.05)}setRating(t){const e=[];return t>=3&&e.push("aaLarge"),t>=4.5&&(e.push("aaaLarge"),e.push("aa")),t>=7&&e.push("aaa"),e.length>this.highest&&(this.highest=e.length),e}getLuminance(t){const e=t.toValues(),s=e.r/255,n=e.g/255,o=e.b/255;let r,i,a;return r=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4),i=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),a=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),.2126*r+.7152*i+.0722*a}toReport(){return{color:this.color,combinations:this.combinations}}toMostReadable(){return this.combinations.filter((function(t){return t.accessibility.length===this.highest}),this)}}class e extends class{convertHslToRgb(){const t=this.h/360,e=this.s/100,s=this.l/100;let n,o,r=s,i=s,a=s;0!==e&&(n=s<.5?s*(1+e):s+e-s*e,o=2*s-n,r=this.convertHueToRgb(o,n,t+1/3),i=this.convertHueToRgb(o,n,t),a=this.convertHueToRgb(o,n,t-1/3)),this.r=255*r,this.g=255*i,this.b=255*a}convertHueToRgb(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t}convertRgbToHsl(){const t=this.r/255,e=this.g/255,s=this.b/255,n=Math.max(t,e,s),o=Math.min(t,e,s),r=n+o,i=n-o;let a=0,l=0,c=r/2;if(o!=n)switch(c<.5?l=i/r:(l=2-n-o,l=i/l),n){case t:a=e-s,a/=i;break;case e:a=s-t,a/=i,a+=2;break;case s:a=t-e,a/=i,a+=4}a*=60,a<0&&(a+=360),this.h=a,this.s=100*l,this.l=100*c}convertValueToDecimal(t){let e=parseFloat(t);return e<1&&!t.toString().includes("%")&&(e*=100),e}convertDecimalToHex(t,e=!0){let s=Math.round(t).toString(16);return e&&(s=s.padStart(2,"0")),s}convertHexToDecimal(t){return parseInt(t,16)}convertToFloat(t){return Math.round(t)/100}rebaseDecimalForHex(t){return Math.round(t/100*255)}rebaseHexForDecimal(t){const e=this.convertHexToDecimal(t);return Math.round(e/255*100)}round(t,e=0){return e>0?t.toPrecision(e):Math.round(t)}}{constructor(t){if(super(),this.original=null,this.space=null,this.r=null,this.g=null,this.b=null,this.h=null,this.s=null,this.l=null,this.a=100,t instanceof e){const e=t.toValues();this.setValues(e)}else this.isHex(t)?(this.original=t,this.space="hex",this.parseHex(t)):this.isRgb(t)?(this.original=t,this.space="rgb",this.parseRgb(t)):this.isHsl(t)?(this.original=t,this.space="hsl",this.parseHsl(t)):this.setDefault()}isHex(t){return!!t&&t.startsWith("#")}isRgb(t){return!!t&&t.startsWith("rgb")}isHsl(t){return!!t&&t.startsWith("hsl")}hasAlpha(){return 100!==this.a}parseHex(t){let e;(t=t.replace(/[#; ]/g,"")).length<6?(e=t.match(/.{1}/g),e.forEach((function(t,s){e[s]=t.repeat(2)}))):e=t.match(/.{2}/g),this.setHex(e)}parseRgb(t){const e=t.match(/\((.*)\)/)[1].split(/[\s,/]+/);this.setRgb(e)}parseHsl(t){const e=t.match(/\((.*)\)/)[1].split(/[\s,/]+/);this.setHsl(e)}setDefault(){this.setValues({original:null,space:"hex",r:255,g:255,b:255,h:0,s:0,l:100,a:100})}setValues(t){this.original=t.original,this.space=t.space,this.r=t.r,this.g=t.g,this.b=t.b,this.h=t.h,this.s=t.s,this.l=t.l,this.a=t.a}setSpace(t){this.space=t}setRed(t){this.r=this.convertValueToDecimal(t)}setGreen(t){this.g=this.convertValueToDecimal(t)}setBlue(t){this.b=this.convertValueToDecimal(t)}setHue(t){this.h=this.convertValueToDecimal(t)}setSaturation(t){this.s=this.convertValueToDecimal(t)}setLightness(t){this.l=this.convertValueToDecimal(t)}setAlpha(t){this.a=this.convertValueToDecimal(t)}setHex(t){t?(this.setRed(parseInt(t[0],16)),this.setGreen(parseInt(t[1],16)),this.setBlue(parseInt(t[2],16)),4===t.length&&this.setAlpha(this.rebaseHexForDecimal(t[3])),this.convertRgbToHsl()):this.setDefault()}setRgb(t){t?(this.setRed(t[0]),this.setGreen(t[1]),this.setBlue(t[2]),4===t.length&&this.setAlpha(t[3]),this.convertRgbToHsl()):this.setDefault()}setHsl(t){t?(this.setHue(t[0]),this.setSaturation(t[1]),this.setLightness(t[2]),4===t.length&&this.setAlpha(t[3]),this.convertHslToRgb()):this.setDefault()}getAlpha(){return this.a}toReadabilityReport(e=["#fff","#000"]){return new t(this,e).toReport()}toMostReadable(e=["#fff","#000"]){return new t(this,e).toMostReadable()}toOriginal(){return this.original}toSpace(){return this.space}toValues(){return{original:this.original,space:this.space,r:this.round(this.r),g:this.round(this.g),b:this.round(this.b),h:this.round(this.h),s:this.round(this.s),l:this.round(this.l),a:this.round(this.a)}}toHex(){return{r:this.convertDecimalToHex(this.r),g:this.convertDecimalToHex(this.g),b:this.convertDecimalToHex(this.b),a:this.convertDecimalToHex(this.rebaseDecimalForHex(this.a))}}toRgb(){return{r:this.round(this.r),g:this.round(this.g),b:this.round(this.b),a:this.convertToFloat(this.a)}}toHsl(){return{h:this.round(this.h),s:this.round(this.s),l:this.round(this.l),a:this.convertToFloat(this.a)}}toString(t=null){if(t||(t=this.toSpace()),t.startsWith("hsl")){const t=this.toHsl();return this.a<100?`hsla(${t.h}, ${t.s}%, ${t.l}%, ${t.a})`:`hsla(${t.h}, ${t.s}%, ${t.l}%)`}if(t.startsWith("rgb")){const t=this.toRgb();return this.a<100?`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`:`rgb(${t.r}, ${t.g}, ${t.b})`}{const t=this.toHex();return this.a<100?`#${t.r}${t.g}${t.b}${t.a}`:`#${t.r}${t.g}${t.b}`}}}function s(t,e,s,n,o,r,i,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var h=c.render;c.render=function(t,e){return l.call(e),h(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}const n={inheritAttrs:!1,props:{name:[String,Number],label:String,value:Array,contrast:Object,readability:Boolean,alpha:Boolean,invalid:Boolean,disabled:Boolean,required:Boolean,help:String},computed:{color(){const t=new e(this.value);return!1===this.alpha&&t.setAlpha(100),t},space(){return this.color.toSpace()}},methods:{onInput(t){this.store(t)},onChangeSpace(t){this.color.setSpace(t),this.store(this.color.toString())},onChangeOpacity(t){this.store(t)},store(t){this.$emit("input",t)}}},o={};var r=s(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({class:{"k-colors-field":!0,"shows-contrast":!1!==t.contrast}},"k-field",t.$props,!1),[s("k-input",t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"colors"},on:{input:t.onInput}},"k-input",t.$props,!1),[s("k-colors-picker",{attrs:{color:t.color},on:{input:t.onInput}}),s("k-colors-input",{attrs:{color:t.color,space:t.space},on:{input:t.onInput}}),!1!==t.alpha?s("k-colors-opacity",{attrs:{color:t.color},on:{"change-opacity":t.onChangeOpacity}}):t._e(),s("k-colors-spaces",{attrs:{space:t.space},on:{"change-space":t.onChangeSpace}})],1),!1!==t.contrast?s("k-colors-contrast",{attrs:{color:t.color,contrast:t.contrast}}):t._e()],1)}),[],!1,i,null,null,null);function i(t){for(let e in o)this[e]=o[e]}var a=function(){return r.exports}();const l={props:{color:Object,contrast:[Boolean,Array]},computed:{readable(){let t=this.contrast;return!0===t&&(t=["#fff","#000"]),this.color.toMostReadable(t)},rating(){if(!this.readable.length)return null;const[t]=this.readable;return t.accessibility[t.accessibility.length-1]},value(){if(!this.readable.length)return null;const[t]=this.readable;return t.color.toString()}}},c={};var h=s(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-input",t._b({ref:"input",staticClass:"k-colors-contrast",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),[s("div",{staticClass:"k-colors-color",style:{background:t.value},attrs:{"data-rating":t.rating}})])}),[],!1,u,null,null,null);function u(t){for(let e in c)this[e]=c[e]}var p=function(){return h.exports}(),d={methods:{onInput(t){this.store(t.target.value)},onUp(t){const e=t.target,s=e.getAttribute("max");if(!s)return;let n=parseInt(e.value,10),o=1;t.metaKey&&(o=10),n=Math.min(n+o,s),n<0&&(n=0),this.store(n,e)},onDown(t){const e=t.target,s=e.getAttribute("min");if(!s)return;let n=parseInt(e.value,10),o=1;t.metaKey&&(o=10),n=Math.max(s,n-o),n<0&&(n=0),this.store(n,e)}}};const f={};var g=s({mixins:[d],props:{color:{validator:function(t){}},space:String},computed:{hex(){return this.color.toOriginal()?this.color.toString("hex").substr(1,6):""},rgb(){return this.color.toRgb()},hsl(){return this.color.toHsl()}},methods:{store(t,e){const s=this.$refs;let n={};if(t){switch("hex"!==this.space&&(Object.keys(s).forEach((function(t){s[t]&&(n[t]=s[t].value)})),e&&(n[e.dataset.unit]=t)),this.space){case"hex":this.color.parseHex(t);break;case"rgb":this.color.setRgb([n.r,n.g,n.b]);break;case"hsl":this.color.setHsl([n.h,n.s,n.l])}this.$emit("input",this.color.toString())}else this.$emit("input","")}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-colors-units"},["rgb"===t.space?[s("label",{staticClass:"k-colors-label"},[s("span",[t._v("R")]),s("input",{ref:"r",staticClass:"k-colors-input",attrs:{"data-unit":"r",type:"text",min:"0",max:"255"},domProps:{value:t.rgb.r},on:{input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUp.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDown.apply(null,arguments))}]}})]),s("label",{staticClass:"k-colors-label"},[s("span",[t._v("G")]),s("input",{ref:"g",staticClass:"k-colors-input",attrs:{"data-unit":"g",type:"text",min:"0",max:"255"},domProps:{value:t.rgb.g},on:{input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUp.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDown.apply(null,arguments))}]}})]),s("label",{staticClass:"k-colors-label"},[s("span",[t._v("B")]),s("input",{ref:"b",staticClass:"k-colors-input",attrs:{"data-unit":"b",type:"text",min:"0",max:"255"},domProps:{value:t.rgb.b},on:{input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUp.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDown.apply(null,arguments))}]}})])]:"hsl"===t.space?[s("label",{staticClass:"k-colors-label"},[s("span",[t._v("H")]),s("input",{ref:"h",staticClass:"k-colors-input",attrs:{"data-unit":"h",type:"text",min:"0",max:"360"},domProps:{value:t.hsl.h},on:{input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUp.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDown.apply(null,arguments))}]}})]),s("label",{staticClass:"k-colors-label"},[s("span",[t._v("S")]),s("input",{ref:"s",staticClass:"k-colors-input",attrs:{"data-unit":"s",type:"text",min:"0",max:"100"},domProps:{value:t.hsl.s},on:{input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUp.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDown.apply(null,arguments))}]}})]),s("label",{staticClass:"k-colors-label"},[s("span",[t._v("L")]),s("input",{ref:"l",staticClass:"k-colors-input",attrs:{"data-unit":"l",type:"text",min:"0",max:"100"},domProps:{value:t.hsl.l},on:{input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUp.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDown.apply(null,arguments))}]}})])]:[s("label",{staticClass:"k-colors-label"},[s("span",[t._v("#")]),s("input",{ref:"hex",staticClass:"k-colors-input is-hex",attrs:{type:"text"},domProps:{value:t.hex},on:{change:t.onInput}})])]],2)}),[],!1,k,null,null,null);function k(t){for(let e in f)this[e]=f[e]}var b=function(){return g.exports}();const y={};var v=s({mixins:[d],props:{color:Object},computed:{opacity(){return this.color.getAlpha()}},methods:{store(t){let e=parseInt(t,10),s=this.color.toSpace();this.color.setAlpha(e),this.$emit("change-opacity",this.color.toString(s))}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"k-colors-opacity"},[s("input",{staticClass:"k-colors-input is-alpha",attrs:{type:"text",min:"0",max:"100"},domProps:{value:t.opacity},on:{input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUp.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDown.apply(null,arguments))}]}}),s("span",[t._v("%")])])}),[],!1,m,null,null,null);function m(t){for(let e in y)this[e]=y[e]}var x=function(){return v.exports}();const w={};var _=s({props:{color:Object},data:()=>({init:!1}),computed:{value(){return this.color.toOriginal()?this.color.toString("hex"):""},hex(){return this.color.toOriginal()?this.color.toString("hex").substring(0,7):null}},methods:{onInput(t){if(!this.init)return void(this.init=!0);const s=new e(t.target.value),n=this.color.toSpace();s.setAlpha(this.color.getAlpha()),this.$emit("input",s.toString(n))}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-colors-preview"},[s("label",{staticClass:"k-colors-color",style:{background:t.value}},[s("input",{staticClass:"k-colors-picker",attrs:{type:"color"},domProps:{value:t.hex},on:{input:t.onInput}})])])}),[],!1,D,null,null,null);function D(t){for(let e in w)this[e]=w[e]}var C=function(){return _.exports}();const H={};var $=s({props:{space:String},methods:{showHex(){this.$emit("change-space","hex")},showRgb(){this.$emit("change-space","rgb")},showHsl(){this.$emit("change-space","hsl")}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dropdown",[s("k-button",{staticClass:"k-colors-space-button",attrs:{icon:"angle-down",tabindex:"-1"},on:{click:function(e){return t.$refs.dropdown.toggle()}}}),s("k-dropdown-content",{ref:"dropdown",attrs:{align:"right"}},[s("k-dropdown-item",{class:{"is-current":"hex"===t.space},on:{click:t.showHex}},[t._v(" HEX ")]),s("k-dropdown-item",{class:{"is-current":"rgb"===t.space},on:{click:t.showRgb}},[t._v(" RGB ")]),s("k-dropdown-item",{class:{"is-current":"hsl"===t.space},on:{click:t.showHsl}},[t._v(" HSL ")])],1)],1)}),[],!1,R,null,null,null);function R(t){for(let e in H)this[e]=H[e]}var S=function(){return $.exports}();window.panel.plugin("hananils/colors",{fields:{colors:a},components:{"k-colors-contrast":p,"k-colors-input":b,"k-colors-opacity":x,"k-colors-picker":C,"k-colors-spaces":S}})}();
